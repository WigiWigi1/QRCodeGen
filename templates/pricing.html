<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Pricing ‚Äî ColorQR</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Create beautiful, scannable QR codes for your brand. Get vector SVG print quality, guaranteed contrast, dynamic QR codes, and logo embedding with ColorQR." />
  <link rel="icon" type="image/png" href="/static/favicon.png"/>
  <link rel="stylesheet" href="/static/style.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500&display=swap" rel="stylesheet">
  <link rel="canonical" href="https://colorqr.app/" />

  <script src="https://js.stripe.com/v3"></script>

  <style>
    /* –ß—É—Ç—å —É–º–µ–Ω—å—à–∞–µ–º —à—Ä–∏—Ñ—Ç –≤ —Å–ø–∏—Å–∫–µ —Ñ–∏—á (–µ—Å–ª–∏ –Ω–∞–¥–æ) */
    .feature-list li {
      font-size: 0.95rem;
      margin-bottom: 0.65rem;
      line-height: 1.3;
    }

    /* –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Ç–∞—Ä–∏—Ñ–∞ + –±–µ–π–¥–∂ ¬´Current plan¬ª */
    .plan-header-top {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: .5rem;
    }
    .plan-label-current {
      font-size: .75rem;
      padding: .2rem .6rem;
      border-radius: 9999px;
      background: #ecfdf5;
      color: #166534;
      font-weight: 600;
      white-space: nowrap;
    }

    .plan-cta-note {
      margin-top: auto;
      font-size: .9rem;
      color: #4b5563;
    }
    .plan-cta-note strong {
      font-weight: 600;
    }
    .plan-cta-note.plan-cta-active {
      color: #15803d;
    }
  </style>
</head>
<body>
<div class="header">
  <div class="logo">
      <a href="/" class="logo-link">ColorQR</a>
      {% if is_pro %}
        <span class="badge badge-pro" title="Pro active">Pro</span>
      {% elif is_one_time %}
        <span class="badge badge-ot" title="One-Time Access active">One-Time</span>
      {% endif %}
    </div>
  <div class="user-box">
      {% if user %}
        {% if user.picture %}<img src="{{ user.picture }}" alt="avatar">{% endif %}
        <span class="user-email">{{ user.email }}</span>
        <a class="logout-btn" href="/logout">Logout</a>
      {% else %}
        <a class="login-btn" href="/login">Login with Google</a>
      {% endif %}
    </div>
</div>

<nav>
  <a href="/"        class="{{ 'active' if active=='home'    else '' }}">Home</a>
  <a href="/about"   class="{{ 'active' if active=='about'   else '' }}">About</a>
  <a href="/pricing" class="{{ 'active' if active=='pricing' else '' }}">Pricing</a>
  <a href="/faq"     class="{{ 'active' if active=='faq'     else '' }}">FAQ</a>
  <a href="/blog"    class="{{ 'active' if active=='blog'    else '' }}">Blog</a>
  <a href="/contact" class="{{ 'active' if active=='contact' else '' }}">Contact</a>
</nav>

<div class="price-container">

    {% if not user %}
    <div class="price-auth-block">
        <div class="icon-header">
            <h4 class="text-green">üõ°Ô∏èWe value your privacy. </h4>
        </div>
        <p class="body-text">
            <b>We do not store your passwords.</b>
            <br>&nbsp;&nbsp;&nbsp;&nbsp;Signing in with Google is the quickest, most secure way to link your purchases to your account, ensuring it's protected and available on any device you use.
        </p>
    </div>
    {% endif %}

    {% set current_plan = 'pro' if is_pro else ('one_time' if is_one_time else 'free') %}

    <div class="card wide">
      <h2 style="text-align:center;margin:.2rem 0 1rem">Our pricing</h2>

      <!-- –∞–¥–∞–ø—Ç–∏–≤–Ω–∞—è —Å–µ—Ç–∫–∞ —Ç–∞—Ä–∏—Ñ–æ–≤; CSS –¥–ª—è .pricing-grid —É–∂–µ –µ—Å—Ç—å –≤ style.css -->
      <div class="pricing-grid">

        <!-- FREE -->
        <div class="plan">
          <div class="plan-header">
            <div class="plan-header-top">
              <h3 style="font-size:1.5rem;font-weight:700;">Free</h3>
              {% if current_plan == 'free' %}
                <span class="plan-label-current">Current plan</span>
              {% endif %}
            </div>
            <p style="color:#6b7280;">For basic, personal use and simple links.</p>
            <div style="font-size:2.5rem;font-weight:800;">‚Ç¨0</div>
          </div>

          <ul class="feature-list">
            <li><span style="color:#10b981;font-weight:600;">‚úÖ</span> 3 Data Types (URL, Wi-Fi, Text)</li>
            <li><span style="color:#10b981;font-weight:600;">‚úÖ</span> 4 Standard Color Palettes</li>
            <li><span style="color:#10b981;font-weight:600;">‚úÖ</span> JPG Export (Standard Quality)</li>
            <li><span style="color:#10b981;font-weight:600;">‚úÖ</span> Small (256px) & Medium (512px) Sizes</li>
            <li style="color:#ef4444;font-weight:600;"><span style="color:#ef4444;">‚ùå</span> <strong>Watermark on all Codes</strong></li>
          </ul>

          <div class="plan-cta">
            <a href="/" class="login-btn secondary" style="display:block;text-align:center;background:#e5e7eb;color:#374151;">
              Start Generating for Free
            </a>
          </div>
        </div>

        <!-- ONE-TIME -->
        <div class="plan plan-onetime" style="border:3px solid #3b82f6;border-radius:16px;padding:1.5rem;background:#eff6ff;position:relative;display:flex;flex-direction:column;">
          <div class="plan-header">
            <div class="plan-header-top">
              <h3 style="font-size:1.5rem;font-weight:700;">One-Time Access üåü</h3>
              {% if current_plan == 'one_time' %}
                <span class="plan-label-current">Current plan</span>
              {% elif current_plan == 'pro' %}
                <span class="plan-label-current">Included in Pro</span>
              {% endif %}
            </div>
            <p style="color:#3b82f6;font-weight:600;">Best for a single, high-quality campaign or event.</p>
            <div style="font-size:2.5rem;font-weight:800;">‚Ç¨{{ one_time_price|default(1.99) }}</div>
          </div>

          <ul class="feature-list">
            <li style="font-weight:700;color:#f59e0b;">
              <span style="color:#f59e0b;">üî•</span> No Watermark (All codes this session)
            </li>
            <li><span style="color:#10b981;font-weight:600;">‚úÖ</span> Full access to 20+ Palettes</li>
            <li><span style="color:#10b981;font-weight:600;">‚úÖ</span> Custom Color Picker (with Guaranteed Contrast)</li>
            <li><span style="color:#10b981;font-weight:600;">‚úÖ</span> HQ JPG Export (up to 1024px)</li>
            <li><span style="color:#10b981;font-weight:600;">‚úÖ</span> All Sizes up to Large </li>
            <li style="color:#9ca3af;"><span style="color:#9ca3af;">‚Äî</span> No Dynamic QR or SVG Export</li>
          </ul>

          {% if is_pro %}
            <div class="plan-cta-note">
              <strong>Already included</strong> in your Pro subscription.
            </div>
          {% elif is_one_time %}
            <div class="plan-cta-note plan-cta-active">
              <strong>This is your current plan.</strong>
            </div>
          {% else %}
            <div class="plan-cta">
              <!-- –ö–Ω–æ–ø–∫–∞, —É–ø—Ä–∞–≤–ª—è–µ–º–∞—è JS + Stripe -->
              <button id="checkout-button-ot"
                      class="login-btn"
                      style="display:block;margin-top:auto;text-align:center;background:#3b82f6;color:white;">
                Unlock Now for ‚Ç¨{{ one_time_price|default(1.99) }}
              </button>
            </div>
          {% endif %}
        </div>

        <!-- PRO -->
        <div class="plan plan-pro" style="border:3px solid #10b981;border-radius:16px;padding:1.5rem;background:#ecfdf5;position:relative;display:flex;flex-direction:column;">
          <div class="plan-header">
            <div class="plan-header-top">
              <h3 style="font-size:1.5rem;font-weight:700;">Pro (The Ultimate Toolkit)</h3>
              {% if current_plan == 'pro' %}
                <span class="plan-label-current">Current plan</span>
              {% endif %}
            </div>
            <p style="color:#10b981;font-weight:600;">For agencies, businesses, and professional design.</p>
            <div style="font-size:2.5rem;font-weight:800;">‚Ç¨9.99/mo</div>
          </div>

          <ul class="feature-list">
            <li style="font-weight:700;color:#10b981;">
              <span style="color:#f59e0b;">üî•</span> Everything in One-Time, Permanent Access
            </li>
            <li><span style="color:#10b981;font-weight:600;">‚úÖ</span> Dynamic QR Codes (Edit target URL anytime)</li>
            <li><span style="color:#10b981;font-weight:600;">‚úÖ</span> Vector SVG Export (Perfect for high-res printing)</li>
            <li><span style="color:#10b981;font-weight:600;">‚úÖ</span> Center Logo/Icon Integration (Custom PNG)</li>
            <li><span style="color:#10b981;font-weight:600;">‚úÖ</span> All 5+ Data Types including vCard</li>
            <li><span style="color:#10b981;font-weight:600;">‚úÖ</span> Highest Quality & Contrast Guaranteed</li>
          </ul>

          {% if is_pro %}
            <div class="plan-cta-note plan-cta-active">
              <strong>This is your current plan.</strong>
            </div>
          {% else %}
            <div class="plan-cta">
              <a href="/login"
                 class="login-btn"
                 style="display:block;margin-top:auto;text-align:center;background:#10b981;color:white;">
                {% if is_one_time %}
                  Upgrade to Pro
                {% else %}
                  Subscribe Now
                {% endif %}
              </a>
            </div>
          {% endif %}
        </div>

      </div>
    </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
      const checkoutButton = document.getElementById('checkout-button-ot');
      const stripe = Stripe('{{ stripe_pub_key }}');
      const isUserLoggedIn = {{ 'true' if user else 'false' }};

      if (checkoutButton) {
          checkoutButton.addEventListener('click', function(event) {
              if (!isUserLoggedIn) {
                  alert("Authentication Required: Please log in via Google to proceed. This is how we securely store your purchase and guarantee your premium access won't be lost.");
                  window.location.href = '{{ url_for("login", next=url_for("pricing")) }}';
                  return;
              }

              fetch('/create-checkout-session', {
                  method: 'POST',
                  headers: { 'Content-Type': 'application/json' },
                  body: JSON.stringify({})
              })
              .then(function(response) {
                  if (!response.ok) {
                      return response.json().then(data => { throw new Error(data.error || 'Unknown error') });
                  }
                  return response.json();
              })
              .then(function(session) {
                  if (session.error) {
                      alert('Error: ' + session.error);
                      return;
                  }
                  return stripe.redirectToCheckout({ sessionId: session.sessionId });
              })
              .catch(function(error) {
                  console.error('Error during checkout:', error);
                  alert('An unexpected error has occured. Please try again ' + error.message);
              });
          });
      }
  });
</script>

</body>
</html>
